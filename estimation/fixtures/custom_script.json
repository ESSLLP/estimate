[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Opportunity", 
  "modified": "2018-08-28 17:50:25.239562", 
  "name": "Opportunity-Client", 
  "script": "frappe.ui.form.on('Opportunity', {\n\trefresh: function(frm) {\n\t\tif(!frm.doc.__islocal){\n\t\t\tfrm.add_custom_button(__(\"Project Estimate\"), function(){\n\t\t\t\tmake_project_estimate(frm.doc);\n\t\t\t}, __(\"Make\"));\n\t\t}\n\t}\n});\n\nvar make_project_estimate=function(doc){\n\tfrappe.call({\n\t\t\t\t\tmethod: \"estimation.estimation.utils.make_project_estimate\",\n\t\t\t\t\targs:{\n\t\t\t\t\t\topportunity: doc.name\n\t\t\t\t\t},\n\t\t\t\t\tcallback: function(r) {\n\t\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\t\tvar project_estimate = frappe.model.sync(r.message);\n\t\t\t\t\t\t\tfrappe.set_route(\"Form\", project_estimate[0].doctype, project_estimate[0].name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tfrappe.show_alert({\n\t\t\t\t\t\t\t\tmessage:__('No data'),\n\t\t\t\t\t\t\t\tindicator:'orange'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n}\n", 
  "script_type": "Client"
 }
]